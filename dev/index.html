<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Animations.jl · Animations.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Animations.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Animations.jl</a><ul class="internal"><li><a class="toctext" href="#Animations-1">Animations</a></li><li><a class="toctext" href="#Easings-1">Easings</a></li><li><a class="toctext" href="#Repeats,-Yoyo,-Pre-and-Postwait-1">Repeats, Yoyo, Pre- and Postwait</a></li><li><a class="toctext" href="#Colors-and-special-types-1">Colors and special types</a></li><li><a class="toctext" href="#Arrays-1">Arrays</a></li><li><a class="toctext" href="#Relative-timestamps-1">Relative timestamps</a></li><li><a class="toctext" href="#FiniteLengthAnimation-1">FiniteLengthAnimation</a></li><li><a class="toctext" href="#Loops-1">Loops</a></li><li><a class="toctext" href="#Sequences-1">Sequences</a></li><li><a class="toctext" href="#Async-animations-1">Async animations</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Animations.jl</a></li></ul><a class="edit-page" href="https://github.com/jkrumbiegel/Animations.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Animations.jl</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Animations.jl-1" href="#Animations.jl-1">Animations.jl</a></h1><ul><li><a href="#Animations.jl-1">Animations.jl</a></li><ul><li><a href="#Animations-1">Animations</a></li><li><a href="#Easings-1">Easings</a></li><li><a href="#Repeats,-Yoyo,-Pre-and-Postwait-1">Repeats, Yoyo, Pre- and Postwait</a></li><li><a href="#Colors-and-special-types-1">Colors and special types</a></li><li><a href="#Arrays-1">Arrays</a></li><li><a href="#Relative-timestamps-1">Relative timestamps</a></li><li><a href="#FiniteLengthAnimation-1">FiniteLengthAnimation</a></li><li><a href="#Loops-1">Loops</a></li><li><a href="#Sequences-1">Sequences</a></li><li><a href="#Async-animations-1">Async animations</a></li></ul></ul><p>Animations.jl offers an easy way to set up simple animations where multiple keyframes are interpolated between in sequence. You can choose different easing functions or create your own. Keyframe values can be anything that can be linearly interpolated, you can also add your own methods for special types. An easing can have repetitions and delays, so that looping animations are simpler to create.</p><h2><a class="nav-anchor" id="Animations-1" href="#Animations-1">Animations</a></h2><p>An <code>Animation</code> consists of <code>Keyframe</code>s that each have a time stamp and a value. That value must be of the same type for all keyframes. For each pair of consecutive keyframes the animation also contains an <code>Easing</code>. This easing determines how values between two keyframes are interpolated over time. You generally don&#39;t have to construct keyframes yourself, there are a few constructor functions for <code>Animation</code> that are easier to use.</p><p>Here we create an animation that starts at the value 1 at time t = 0, then goes to to 2 at t = 1, and then 3 at t = 2. Between the first two keyframes we use a sine in / out easing, and between the next two a linear easing.</p><pre><code class="language-">using PyPlot # hide
using Animations
anim = Animation(
    0, 1.0, # t = 0, value = 1
    sineio(),
    1, 2,   # t = 1, value = 2
    linear(),
    2, 3    # t = 2, value = 3
)
nothing  # hide</code></pre><p>Because we are just interpolating numbers in most examples here, we can plot them to visualize what the result of the animation is. To get the value of the animation at some time <code>t</code> we use the <code>at()</code> function.</p><pre><code class="language-">ts = 0:0.01:2
ys = at.(anim, ts)

figure(figsize=(4, 2.5)) # hide
plot(ts, ys)
xlabel(&quot;t&quot;) # hide
ylabel(&quot;animation value&quot;) # hide
tight_layout() # hide
savefig(&quot;example_1.svg&quot;); nothing # hide</code></pre><p><img src="example_1.svg" alt/></p><p>Another way to write this is with vectors for timestamps and values. (Note that the first version is often easier to understand if you have many timestamps or if the values are longer, so timestamps and values are not visually aligned anymore). Here&#39;s an example of the vector syntax:</p><pre><code class="language-julia">anim = Animation(
    [0, 2, 3],
    [0.0, 10.0, 20.0],
    [sineio(), linear()],
)</code></pre><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The keyframe values are specified as <code>Float64</code> literals here and not <code>Int</code>s. That is because an <code>Animation{T}</code> always has to return values of type <code>T</code> and if <code>T</code> is <code>Int</code> you get <code>InexactError</code>s in most cases after interpolation.</p></div></div><p>Instead of using <code>at()</code>, you can also get an animation&#39;s value for a specific t by calling it:</p><pre><code class="language-julia">value = anim(t)</code></pre><p>If you use the interleaved syntax from above, you can leave out easings and they will be filled in with the default linear easing, which you can change using the <code>defaulteasing</code> keyword like so:</p><pre><code class="language-julia">anim = Animation(
    0, 1.0,  # t = 0, value = 1
    # no easing specified
    1, 2.0,  # t = 1, value = 2
    # no easing specified
    2, 3.0;  # t = 2, value = 3
    defaulteasing = sineio()
)</code></pre><p>If you use the vector syntax, you can simply specify a single easing instead of a vector, and it will be used for all keyframes. This is the equivalent to the previous example in vector syntax:</p><pre><code class="language-julia">anim = Animation(
    [0, 1, 2],
    [1.0, 2.0, 3.0],
    sineio() # note the single easing instead of a vector
)</code></pre><h2><a class="nav-anchor" id="Easings-1" href="#Easings-1">Easings</a></h2><p>Easings determine how keyframes are interpolated between. These are (usually) functions that go from 0 to 1 over the range from 0 to 1, and their curvature decides velocity and acceleration of the animation. There are multiple predefined easing functions, some of which take parameters:</p><p><img src="easingplots.svg" alt/></p><h2><a class="nav-anchor" id="Repeats,-Yoyo,-Pre-and-Postwait-1" href="#Repeats,-Yoyo,-Pre-and-Postwait-1">Repeats, Yoyo, Pre- and Postwait</a></h2><p>Often you have two values that you interpolate between, but you want a more interesting animation than just going from a to b. Each easing function takes four keyword arguments that you can use for that, <code>n</code>, <code>yoyo</code>, <code>prewait</code> and <code>postwait</code>.</p><h3><a class="nav-anchor" id="Repeats-1" href="#Repeats-1">Repeats</a></h3><p>Use the <code>n</code> keyword for repeats:</p><pre><code class="language-julia">anim = Animation(
    0, 0.0,
    linear(n=3),
    2, 1.0
)

ts = 0:0.01:2
ys = at.(anim, ts)

plot(ts, ys)</code></pre><p><img src="example_n_keyword.svg" alt/></p><h3><a class="nav-anchor" id="Yoyo-1" href="#Yoyo-1">Yoyo</a></h3><p>As you can see, repeats lead to breaks in the animation, which might be what you want, but often you want a back-and-forth motion between two values, like a yoyo. That&#39;s what the <code>yoyo</code> parameter is for:</p><pre><code class="language-julia">anim = Animation(
    0, 0.0,
    linear(n=3, yoyo=true),
    2, 1.0
)

ts = 0:0.01:2
ys = at.(anim, ts)

plot(ts, ys)</code></pre><p><img src="example_yoyo.svg" alt/></p><p>Only if n is an odd number does an animation with yoyo end with the second keyframe value, otherwise it ends with the first. This is something to keep in mind. If you have a keyframe following after, you might want an odd number of repeats so there is no break, if you just want a looping animation without a break, you might want to choose an even number. Also, if you retrieve values from an animation for timestamps outside of its keyframes, all values before the first keyframe are the same as the first computed value, and all values after are the same as the last computed value, not the actual keyframe values. This is only relevant if you use even-numbered yoyo&#39;s though, which often happens with looping animations. See the difference here:</p><pre><code class="language-julia">anim_even = Animation(
    0, 0.0,
    linear(n=4, yoyo=true),
    2, 1.0
)

anim_odd = Animation(
    0, 0.0,
    linear(n=3, yoyo=true),
    2, 1.0
)

ts = -0.5:0.01:3
ys_even = at.(anim_even, ts)
ys_odd = at.(anim_odd, ts)

plot(ts, ys_even, label=&quot;even&quot;)
plot(ts, ys_odd, label=&quot;odd&quot;)</code></pre><p><img src="example_yoyo_evenodd.svg" alt/></p><h3><a class="nav-anchor" id="Prewait-and-Postwait-1" href="#Prewait-and-Postwait-1">Prewait and Postwait</a></h3><p>Especially with yoyo animations, it often looks better if there is a slight moment of rest at the endpoints. You can easily achieve this with the <code>prewait</code> and <code>postwait</code> keywords. Their values are given in fractions of keyframe to keyframe duration, so <code>prewait = 0.5</code> means the actual animation happens only in the second half. Here&#39;s an example:</p><pre><code class="language-julia">anim = Animation(
    0, 0.0,
    linear(prewait=0.1, postwait=0.3),
    2, 1.0
)

ts = 0:0.01:2
ys = at.(anim, ts)

plot(ts, ys)</code></pre><p><img src="example_prepostwait.svg" alt/></p><p>If you use repeat or yoyo, each prewait and postwait period is just divided by the number of repeats:</p><pre><code class="language-julia">anim = Animation(
    0, 0.0,
    linear(prewait=0.1, postwait=0.3, n=2, yoyo=true),
    2, 1.0
)

ts = 0:0.01:2
ys = at.(anim, ts)

plot(ts, ys)</code></pre><p><img src="example_prepostwait_yoyo.svg" alt/></p><h2><a class="nav-anchor" id="Colors-and-special-types-1" href="#Colors-and-special-types-1">Colors and special types</a></h2><p>Using Colors is enabled already, but you can add other custom types that can be interpolated:</p><pre><code class="language-julia">coloranim = Animation(
    0, RGB(1, 0, 0),
    sineio(),
    1, RGB(0, 1, 0),
    polyin(2),
    2, RGB(0, 0, 1)
)</code></pre><p>For your own type T, if the generic <code>(value2 - value1) * fraction + value1</code> doesn&#39;t work, just add a method <code>linear_interpolate(fraction::Real, value1::T, value2::T) where T</code>.</p><h2><a class="nav-anchor" id="Arrays-1" href="#Arrays-1">Arrays</a></h2><p>Interpolation also works easily with arrays of values:</p><pre><code class="language-julia">Animation(
    0, rand(25),
    sineio(n=2, yoyo=true, prewait=0.3),
    2, rand(25)
)</code></pre><h2><a class="nav-anchor" id="Relative-timestamps-1" href="#Relative-timestamps-1">Relative timestamps</a></h2><p>If you&#39;re tweaking the length of parts of an animation, you can use <code>rel()</code> for a timestamp relative to the previous one, like so:</p><pre><code class="language-julia">Animation(
    0,        1.0,
    rel(1),   2.0,
    rel(3),   3.0,
    rel(0.2), 0.0,
    rel(0.4), 1.0
)</code></pre><p>This way it&#39;s easier to adjust one duration without having to change all following ones.</p><h2><a class="nav-anchor" id="FiniteLengthAnimation-1" href="#FiniteLengthAnimation-1">FiniteLengthAnimation</a></h2><p>Animations, Loops and Sequences are subtypes of FiniteLengthAnimation, which are required as the content for (finite) Loops and Sequences</p><h2><a class="nav-anchor" id="Loops-1" href="#Loops-1">Loops</a></h2><p>You can turn a FiniteLengthAnimation into a loop like this:</p><pre><code class="language-julia">anim = Animation(
    0,   1.0,
    sineio(),
    0.5, 2.0,
    polyin(3),
    1,   1.0
)

start = 0
gap = 1
repetitions = 3
loop = Loop(anim, start, gap, repetitions)

ts = 0:0.01:6
ys = at.(loop, ts)

plot(ts, ys)</code></pre><p><img src="example_loop.svg" alt/></p><h2><a class="nav-anchor" id="Sequences-1" href="#Sequences-1">Sequences</a></h2><p>You can string together FiniteLengthAnimations into sequences like this:</p><pre><code class="language-julia">anim1 = Animation(
    0,   1.0,
    sineio(),
    0.5, 2.0,
    polyin(3),
    1,   1.0
)

anim2 = Animation(
    0,   1.0,
    saccadic(2),
    0.5, 3.0,
    expout(3),
    1,   1.0
)

loop = Loop(anim2, 0, 0.5, 3)

start = 0
gap = 1
sequence = Sequence([anim1, loop], start, gap)

ts = 0:0.01:6
ys = at.(sequence, ts)

plot(ts, ys)</code></pre><p><img src="example_sequence.svg" alt/></p><h2><a class="nav-anchor" id="Async-animations-1" href="#Async-animations-1">Async animations</a></h2><p>If you want to run animations live, e.g. in an interactive plotting context, you can use <code>animate_async</code>. You supply a variable number of animations, loops and sequences and a function. This function is called with the current time of the animation (starting at zero) and the evaluated result of each animation at that time.</p><pre><code class="language-julia">animate_async(an_animation, a_sequence, a_loop) do t, v_anim, v_seq, v_loop
    # do something with the animation values here, like updating a plot
end</code></pre><footer><hr/></footer></article></body></html>
